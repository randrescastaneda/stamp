<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Stable SipHash-1-3 of code — st_hash_code • stamp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stable SipHash-1-3 of code — st_hash_code"><meta name="description" content='Computes a stable hash of R code (functions, expressions, or character vectors).
For functions, includes both formals (arguments) and body. Whitespace is
lightly normalized to reduce spurious differences. That means code changes which only
alter the number of spaces in strings (e.g. "a  b" vs "a b") will produce identical hashes.'><meta property="og:description" content='Computes a stable hash of R code (functions, expressions, or character vectors).
For functions, includes both formals (arguments) and body. Whitespace is
lightly normalized to reduce spurious differences. That means code changes which only
alter the number of spaces in strings (e.g. "a  b" vs "a b") will produce identical hashes.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stamp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/stamp.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../articles/setup-and-basics.html">Setup and Basics</a></li>
    <li><a class="dropdown-item" href="../articles/stamp-directory.html">The .stamp Directory: Structure and Internals</a></li>
    <li><a class="dropdown-item" href="../articles/hashing-and-versions.html">Hashing, Change Detection and Versions</a></li>
    <li><a class="dropdown-item" href="../articles/lineage-rebuilds.html">Lineage and Rebuilds</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Usage</h6></li>
    <li><a class="dropdown-item" href="../articles/builders-plans.html">Builders, Plans, and Rebuilds</a></li>
    <li><a class="dropdown-item" href="../articles/using-alias.html">Using Aliases with stamp</a></li>
    <li><a class="dropdown-item" href="../articles/version_retention_prune.html">Version Retention, Pruning, and Table Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/partitions.html">Working with Partitioned Datasets</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/randrescastaneda/stamp"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Stable SipHash-1-3 of code</h1>
      <small class="dont-index">Source: <a href="https://github.com/randrescastaneda/stamp/blob/master/R/hashing.R" class="external-link"><code>R/hashing.R</code></a></small>
      <div class="d-none name"><code>st_hash_code.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes a stable hash of R code (functions, expressions, or character vectors).
For functions, includes both formals (arguments) and body. Whitespace is
lightly normalized to reduce spurious differences. That means code changes which only
alter the number of spaces in strings (e.g. "a  b" vs "a b") will produce identical hashes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">st_hash_code</span><span class="op">(</span><span class="va">code</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-code">code<a class="anchor" aria-label="anchor" href="#arg-code"></a></dt>
<dd><p>A function, expression (language object), or character vector</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Lowercase hex string (16 hex characters) from siphash13().</p>
    </div>
    <div class="section level2">
    <h2 id="normalization">Normalization<a class="anchor" aria-label="anchor" href="#normalization"></a></h2>


<p>The code undergoes light normalization before hashing:</p><ul><li><p>Multiple spaces/tabs collapsed to single space</p></li>
<li><p>Line endings normalized to <code>\n</code></p></li>
<li><p>This reduces false positives from formatting changes while preserving code structure</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="what-gets-hashed">What Gets Hashed<a class="anchor" aria-label="anchor" href="#what-gets-hashed"></a></h2>


<ul><li><p><strong>Functions</strong>: formals (argument list) + body (code)</p></li>
<li><p><strong>Expressions/language</strong>: deparsed code</p></li>
<li><p><strong>Character vectors</strong>: concatenated with newlines</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Hash a function</span></span></span>
<span class="r-in"><span><span class="fu">st_hash_code</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Hash an expression</span></span></span>
<span class="r-in"><span><span class="fu">st_hash_code</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Hash character code</span></span></span>
<span class="r-in"><span><span class="fu">st_hash_code</span><span class="op">(</span><span class="st">"x &lt;- 1\ny &lt;- 2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by R.Andres Castaneda, Diana C. Garcia Rojas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

