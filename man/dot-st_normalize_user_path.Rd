% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{.st_normalize_user_path}
\alias{.st_normalize_user_path}
\title{Universal path normalization and validation helper (internal)}
\usage{
.st_normalize_user_path(
  user_path,
  alias = NULL,
  must_exist = FALSE,
  verbose = TRUE,
  auto_switch = TRUE
)
}
\arguments{
\item{user_path}{Character path provided by user (relative or absolute)}

\item{alias}{Optional alias; if NULL, uses "default"}

\item{must_exist}{Logical; if TRUE and user provided absolute path, verify it exists}
}
\value{
List with components: logical_path, storage_path, rel_path, alias, is_absolute
}
\description{
This is the central helper that validates and normalizes any user-provided path.
It handles both relative and absolute paths, validates absolute paths are under
the alias root, and returns a standardized structure that all other functions can use.
}
\details{
\strong{Validation Rules:}
\itemize{
\item Absolute paths MUST be under the alias root (or raise error)
\item Absolute paths MUST exist (or raise error)
\item Relative paths are resolved against alias root
\item All paths are normalized to absolute form
}

\strong{Return Structure:}
\itemize{
\item \code{logical_path}: The user's path relative to root (for catalog, API)
\item \code{storage_path}: Physical location in .st_data where file lives
\item \code{rel_path}: Relative path from root (same as logical but may differ in format)
\item \code{alias}: The alias used
\item \code{is_absolute}: Whether user provided absolute path
}
}
\examples{
\dontrun{
# Relative path
result <- .st_normalize_user_path("dirA/file.qs")
# result$logical_path = "dirA/file.qs"
# result$storage_path = "<root>/.st_data/dirA/file.qs/file.qs"
# result$rel_path = "dirA/file.qs"

# Absolute path
result <- .st_normalize_user_path("/full/path/to/root/dirA/file.qs")
# Validates it's under root, extracts rel_path = "dirA/file.qs"
}
}
\keyword{internal}
