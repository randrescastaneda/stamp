---
title: "Extending stamp (Formats & Conventions)"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Extending stamp (Formats & Conventions)}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Goal
Extend **stamp** without changing its internals.

## Add new formats
Use `st_register_format()` to add (or override) a format.

```r
# Example: Feather via {arrow}
if (requireNamespace("arrow", quietly = TRUE)) {
  st_register_format(
    "feather",
    read  = function(path, ...) arrow::read_feather(path, ...),
    write = function(x, path, ...) arrow::write_feather(x, path, ...)
  )
  st_save(iris, "tables/iris.feather", format = "feather")
  iris2 <- st_load("tables/iris.feather")
}
```

## Project-level conventions

* Prefer **qs2** for artifacts (speed + compactness).
* Keep sidecars as **JSON** unless your team prefers binary (set `st_opts(meta_format = "qs2")` or `"both"`).
* Use `st_path()` when you want code to be explicit about formats.
* Keep file layouts simple (e.g., `data/`, `derived/`, and `.stamp/`).

## Stability notes

* These APIs are intended to remain steady:

  * `st_init()`, `st_opts()`, `st_path()`,
  * `st_formats()`, `st_register_format()`,
  * `st_save()`, `st_load()`.